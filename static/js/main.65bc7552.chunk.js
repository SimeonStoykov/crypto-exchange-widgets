(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(40)},25:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(16),c=a.n(o),s=(a(25),a(4)),i=a(5),d=a(7),l=a(6),u=a(8),m=a(3);a(32);var p=["BTCUSD","ETHUSD","BCHUSD","XRPUSD","EOSUSD","LTCUSD","NEOUSD","XMRUSD","IOTUSD","OMGUSD"],k=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.webSocket;e.addEventListener("open",function(){p.forEach(function(t){e.send(function(e){return JSON.stringify({event:"subscribe",channel:"ticker",symbol:"t".concat(e)})}(t))})})}},{key:"getTickers",value:function(){var e=this;return Object.keys(this.props.tickersData).length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"ticker-header-wrapper"},n.a.createElement("div",{className:"ticker-header-row"},"NAME"),n.a.createElement("div",{className:"ticker-header-row"},"LAST"),n.a.createElement("div",{className:"ticker-header-row"},"24H"),n.a.createElement("div",{className:"ticker-header-row"},"VOL")),Object.keys(this.props.tickersData).map(function(t){var a=e.props.tickersData[t],r=t.substr(0,3),o=t.substr(3,3),c=a.dailyChange<0?"lower":"higher",s=Math.abs(100*a.dailyChange);return s=Math.round(100*s)/100,n.a.createElement("div",{key:t,className:"ticker-data-wrapper"},n.a.createElement("div",{className:"ticker-data-row"},r),n.a.createElement("div",{className:"ticker-data-row"},a.lastPrice," ",n.a.createElement("span",{className:"ticker-currency"},o)),n.a.createElement("div",{className:"ticker-data-row ".concat(c)},s+"%"),n.a.createElement("div",{className:"ticker-data-row"},Math.round(a.volume)))})):"Loading Tickers..."}},{key:"render",value:function(){return n.a.createElement("div",{className:"tickers"},n.a.createElement("h3",{className:"tickers-title"},"TICKERS"),this.getTickers())}}]),t}(r.Component),f=Object(m.b)(function(e){return{tickersData:e.tickerReducer.get("tickersData").toJS()}})(k),b=(a(34),function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.webSocket,t=JSON.stringify({event:"subscribe",channel:"book",symbol:"tBTCUSD",prec:"P0",freq:"F0"});e.addEventListener("open",function(){return e.send(t)})}},{key:"getBids",value:function(){return this.props.orderBookData.bids.length>0?n.a.createElement("div",{className:"order-book-list"},n.a.createElement("div",null,n.a.createElement("div",{className:"order-book-col"},"COUNT"),n.a.createElement("div",{className:"order-book-col"},"AMOUNT"),n.a.createElement("div",{className:"order-book-col"},"PRICE")),this.props.orderBookData.bids.map(function(e,t){return n.a.createElement("div",{key:t,className:"order-book-row"},n.a.createElement("div",{className:"order-book-col"},e.count),n.a.createElement("div",{className:"order-book-col"},e.amount),n.a.createElement("div",{className:"order-book-col"},e.price))})):n.a.createElement("div",{className:"loading-order-book"},"Loading Bids...")}},{key:"getAsks",value:function(){return this.props.orderBookData.asks.length>0?n.a.createElement("div",{className:"order-book-list"},n.a.createElement("div",null,n.a.createElement("div",{className:"order-book-col"},"PRICE"),n.a.createElement("div",{className:"order-book-col"},"AMOUNT"),n.a.createElement("div",{className:"order-book-col"},"COUNT")),this.props.orderBookData.asks.map(function(e,t){return n.a.createElement("div",{key:t,className:"order-book-row"},n.a.createElement("div",{className:"order-book-col"},e.price),n.a.createElement("div",{className:"order-book-col"},Math.abs(e.amount)),n.a.createElement("div",{className:"order-book-col"},e.count))})):n.a.createElement("div",{className:"loading-order-book"},"Loading Asks...")}},{key:"render",value:function(){return n.a.createElement("div",{className:"order-book"},n.a.createElement("h3",{className:"order-book-title"},"Order Book - BTC/USD"),this.getBids(),this.getAsks())}}]),t}(r.Component)),v=Object(m.b)(function(e){return{orderBookData:e.orderBookReducer.get("orderBookData").toJS()}})(b),h=(a(36),function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.webSocket,t=JSON.stringify({event:"subscribe",channel:"trades",symbol:"tBTCUSD"});e.addEventListener("open",function(){return e.send(t)})}},{key:"getTrades",value:function(){return this.props.tradesData.length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement("div",{className:"trades-col"},"TIME"),n.a.createElement("div",{className:"trades-col"},"PRICE"),n.a.createElement("div",{className:"trades-col"},"AMOUNT")),this.props.tradesData.map(function(e){var t=new Date(e.milliseconds),a=new Date(t.getTime()+6e4*t.getTimezoneOffset()),r=a.getSeconds(),o=a.getMinutes(),c=a.getHours();r<10&&(r="0"+r),o<10&&(o="0"+o),c<10&&(c="0"+c);var s=e.amount<0?"minus-trade":"plus-trade",i=Math.abs(Math.round(1e4*e.amount)/1e4);return n.a.createElement("div",{key:e.id,className:s},n.a.createElement("div",{className:"trades-col"},"".concat(c,":").concat(o,":").concat(r)),n.a.createElement("div",{className:"trades-col"},e.price.toFixed(1)),n.a.createElement("div",{className:"trades-col"},i.toFixed(4)))})):"Loading Trades..."}},{key:"render",value:function(){return n.a.createElement("div",{className:"trades"},n.a.createElement("h3",{className:"trades-title"},"TRADES BTC/USD"),this.getTrades())}}]),t}(r.Component)),E=Object(m.b)(function(e){return{tradesData:e.tradeReducer.get("tradesData").toJS()}})(h),D=(a(38),new WebSocket("wss://api.bitfinex.com/ws/2")),O=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;D.addEventListener("message",function(t){var a=JSON.parse(t.data);if(a&&a.event&&"subscribed"===a.event&&a.chanId&&a.channel)e.props.setChannelInfo({chanId:a.chanId,channelInfo:{pair:a.pair,type:a.channel}});else if(Array.isArray(a)&&2===a.length&&"hb"!==a[1]){var r=a[0],n=a[1],o=e.props.channelsInfo[r];if(o)switch(o.type){case"ticker":e.props.setTickerData({pair:o.pair,tickerInfo:{lastPrice:n[6],dailyChange:n[5],volume:n[7]}});break;case"book":if(50===n.length){for(var c={bids:[],asks:[]},s=0;s<n.length;s++){var i=n[s],d=Math.round(100*i[0])/100,l=i[1],u=i[2];l>0&&(u>0&&c.bids.push({price:d,count:l,amount:u}),u<0&&c.asks.push({price:d,count:l,amount:u}))}e.props.setOrderBookData(c)}else if(3===n.length){var m=Math.round(100*n[0])/100,p=n[1],k=n[2];if(p>0)if(0!==k){var f="bids";k<0&&(f="asks"),e.props.updateOrderBookData({updatedPart:f,updatedData:{price:m,count:p,amount:k}})}else if(0===p&&(1===k||-1===k)){var b="bids";-1===k&&(b="asks"),e.props.removeOrderBookData({partToRemoveFrom:b,removedPrice:m})}}break;case"trades":for(var v=[],h=0;h<n.length;h++){var E=n[h];v.push({id:E[0],milliseconds:E[1],amount:E[2],price:Math.round(10*E[3])/10})}e.props.setTradeData(v)}}else if(Array.isArray(a)&&3===a.length){var D=a[1],O=a[2];"tu"===D&&e.props.updateTradeData({id:O[0],milliseconds:O[1],amount:O[2],price:Math.round(10*O[3])/10})}})}},{key:"render",value:function(){return n.a.createElement("div",{className:"app"},n.a.createElement(f,{webSocket:D}),n.a.createElement(E,{webSocket:D}),n.a.createElement(v,{webSocket:D}))}}]),t}(r.Component),T=Object(m.b)(function(e){return{channelsInfo:e.appReducer.get("channelsInfo").toJS()}},function(e){return{setChannelInfo:function(t){return e(function(e){return{type:"SET_CHANNEL_INFO",data:e}}(t))},setTickerData:function(t){return e(function(e){return{type:"SET_TICKER_DATA",data:e}}(t))},setOrderBookData:function(t){return e(function(e){return{type:"SET_ORDER_BOOK_DATA",data:e}}(t))},updateOrderBookData:function(t){return e(function(e){return{type:"UPDATE_ORDER_BOOK_DATA",data:e}}(t))},removeOrderBookData:function(t){return e(function(e){return{type:"REMOVE_ORDER_BOOK_DATA",data:e}}(t))},setTradeData:function(t){return e(function(e){return{type:"SET_TRADE_DATA",data:e}}(t))},updateTradeData:function(t){return e(function(e){return{type:"UPDATE_TRADE_DATA",data:e}}(t))}}})(O),g=a(9),N=a(1),S=Object(N.fromJS)({channelsInfo:{}}),y=Object(N.fromJS)({tickersData:{}}),A=a(10),j=a(14),B=Object(N.fromJS)({orderBookData:{bids:[],asks:[]}}),R=Object(N.fromJS)({tradesData:[]}),w=a(19),_=Object(g.c)({appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHANNEL_INFO":var a=t.data,r=a.chanId,n=a.channelInfo;return e.setIn(["channelsInfo",r],n);default:return e}},tickerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TICKER_DATA":var a=t.data,r=a.pair,n=a.tickerInfo;return e.setIn(["tickersData",r],n);default:return e}},orderBookReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ORDER_BOOK_DATA":return e.setIn(["orderBookData","bids"],Object(N.fromJS)([].concat(t.data.bids))).setIn(["orderBookData","asks"],Object(N.fromJS)([].concat(t.data.asks)));case"UPDATE_ORDER_BOOK_DATA":var a=t.data,r=a.updatedPart,n=a.updatedData,o=n.price,c=e.get("orderBookData").toJS(),s=Object(j.a)({},c),i=s[r],d=i.findIndex(function(e){return e.price===o});return-1!==d?i[d]=Object.assign(i[d],n):i.length<25?i.push(n):25===i.length&&(i.pop(),i.push(n)),"bids"===r?i.sort(function(e,t){return t.price-e.price}):i.sort(function(e,t){return e.price-t.price}),e.set("orderBookData",Object(N.fromJS)(s));case"REMOVE_ORDER_BOOK_DATA":var l=t.data,u=l.partToRemoveFrom,m=l.removedPrice,p=e.get("orderBookData").toJS(),k=Object(j.a)({},p),f=k[u],b=f.findIndex(function(e){return e.price===m}),v=Object(A.a)(f);return-1!==b&&v.splice(b,1),e.set("orderBookData",Object(N.fromJS)(k));default:return e}},tradeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRADE_DATA":return e.set("tradesData",Object(N.fromJS)([].concat(t.data)));case"UPDATE_TRADE_DATA":var a=e.get("tradesData").toJS(),r=Object(A.a)(a),n=r.findIndex(function(e){return e.id===t.data.id});return-1!==n?r[n]=Object.assign(r[n],t.data):30===a.length&&(r.pop(),r.push(t.data)),r.sort(function(e,t){return t.milliseconds-e.milliseconds}),e.set("tradesData",Object(N.fromJS)(r));default:return e}}}),I=Object(g.d)(_,Object(g.a)(w.a));c.a.render(n.a.createElement(m.a,{store:I},n.a.createElement(T,null)),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.65bc7552.chunk.js.map